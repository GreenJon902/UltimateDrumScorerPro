#:set bar_edge_padding 0.5
#:set half_bar_edge_padding 1

<NormalScoreSectionEditor_NoteEditor_PlusInbetween>:
    size: container.size

    bar_holder: bar_holder
    note_holder: note_holder
    plus_holder: plus_holder
    cross_holder: cross_holder

    SelfSizingBoxLayout:
        id: container
        orientation: "vertical"
        anchor: "middle"

        SelfSizingBoxLayout:
            id: bar_holder

        SelfSizingBoxLayout:
            id: note_holder

        SelfSizingBoxLayout:
            id: plus_holder

        SelfSizingBoxLayout:
            id: cross_holder

<Plus>:  # Width set by parent
    default_width: 2.5  # Width when nothing to set to
    height: 5
    canvas:
        Color:
            rgba: 0, 0, 0, (1 if self.mouse_over else 0.1)
        Line:
            points: 1.25, 0, 1.25, 5
            width: st
        Line:
            points: 0, 2.5, 2.5, 2.5
            width: st

<Cross>:  # Width set by parent
    height: 5
    canvas:
        Color:
            rgba: 0, 0, 0, (1 if self.mouse_over else 0.1)
        Line:
            points: self.width / 2 - 2.5, 0, self.width / 2 + 2.5, 5  # We want to center the x
            width: st
        Line:
            points: self.width / 2 - 2.5, 5, self.width / 2 + 2.5, 0
            width: st

<BarConfigurer>:
    bar_container: bar_container
    dots_label: dots_label
    before_bar_label: before_bar_label
    after_bar_label: after_bar_label
    full_bar_label: full_bar_label

    height: bar_container.height
    RelativeLayout:
        id: bar_container
        size_hint: None, None
        width: root.width
        height: full_bar_label.top

        BetterSizedLabel:  # Bar before
            id: dots_label
            x: 0
            y: 0
            size_hint: None, None

            color: 0, 0, 0, 1
            text: str(root.dots)
            font_size: 5

            canvas:
                Color:
                    rgba: 0, 0, 0, 1
                Ellipse:
                    pos: (self.right + dot_radius, self.height / 2 - dot_radius)
                    size: (dot_radius * 2, dot_radius * 2)

        BetterSizedLabel:  # Bar before
            id: before_bar_label
            x: 0
            y: dots_label.top
            size_hint: None, None

            color: 0, 0, 0, 1
            text: str(root.before_bars)
            font_size: 5

            canvas:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    points: (self.width, self.height / 2, self.parent.right - half_bar_edge_padding, self.height / 2)
                    width: st

        BetterSizedLabel:  # Bar after
            id: after_bar_label
            right: self.parent.right
            y: before_bar_label.top
            size_hint: None, None

            color: 0, 0, 0, 1
            text: str(root.after_bars)
            font_size: 5

            canvas:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    points: (-self.x + half_bar_edge_padding, self.height / 2, 0, self.height / 2)
                    width: st

        BetterSizedLabel:  # Bar
            id: full_bar_label
            center_x: self.parent.center_x
            y: after_bar_label.top
            size_hint: None, None

            color: 0, 0, 0, 1
            text: str(root.bars)
            font_size: 5

            canvas:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    points: (-self.x + bar_edge_padding, self.height / 2, 0, self.height / 2)
                    width: st
                Line:
                    points: (self.width, self.height / 2, self.parent.right - self.x - bar_edge_padding, self.height / 2)
                    width: st